<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Instant Meeting Summarizer</title>
  <meta name="description" content="Summarize your meeting transcripts instantly. Powered by the Meeting Summarization API.">
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; max-width: 800px; }
    h1 { color: #2c3e50; }
    textarea { width: 100%; height: 200px; }
    input[type="number"], input[type="text"] { width: 100px; margin-right: 10px; }
    label { margin-right: 10px; }
    #result { margin-top: 20px; padding: 1rem; background-color: #f8f9fa; border-radius: 4px; }
    button { padding: 0.5rem 1rem; font-size: 1rem; }
  </style>
</head>
<body>
  <h1>Instant Meeting Summarizer</h1>
  <p>Paste your meeting transcript below and click "Summarize" to generate a concise summary and action items.</p>
  <textarea id="transcript" placeholder="Paste your meeting transcript..."></textarea>
  <div style="margin-top: 10px;">
    <label for="ratio">Summary ratio (0-1):</label>
    <input type="number" id="ratio" step="0.05" min="0.05" max="1" value="0.2">
    <label for="maxSentences">or Max sentences:</label>
    <input type="number" id="maxSentences" min="1" max="20">
  </div>
  <div style="margin-top: 10px;">
    <label for="apiKey">Your RapidAPI Key:</label>
    <input type="text" id="apiKey" placeholder="Enter RapidAPI key">
  </div>
  <button id="summarizeButton" style="margin-top:10px;">Summarize</button>
  <div id="result"></div>

  <script>
    document.getElementById('summarizeButton').addEventListener('click', async () => {
      const text = document.getElementById('transcript').value.trim();
      const ratio = parseFloat(document.getElementById('ratio').value);
      const maxSentences = document.getElementById('maxSentences').value;
      const apiKey = document.getElementById('apiKey').value.trim();
      if (!text) {
        alert('Please enter a transcript.');
        return;
      }
      if (!apiKey) {
        alert('Please enter your RapidAPI key.');
        return;
      }
      const payload = { text };
      if (!isNaN(ratio) && ratio > 0) payload.ratio = ratio;
      if (maxSentences) payload.max_sentences = parseInt(maxSentences);
      document.getElementById('result').innerHTML = 'Processing...';
      try {
        const response = await fetch('https://meeting-summarization-api.p.rapidapi.com/summarize', {
          method: 'POST',
          headers: {
            'content-type': 'application/json',
            'X-RapidAPI-Key': apiKey,
            'X-RapidAPI-Host': 'meeting-summarization-api.p.rapidapi.com'
          },
          body: JSON.stringify(payload)
        });
        if (!response.ok) {
          const textResp = await response.text();
          throw new Error('Request failed: ' + response.status + '\n' + textResp);
        }
        const data = await response.json();
        const summaryHtml = '<h2>Summary</h2><p>' + (Array.isArray(data.summary) ? data.summary.join(' ') : data.summary) + '</p>';
        const actions = data.action_items || [];
        const actionsHtml = actions.length ? '<h2>Action Items</h2><ul>' + actions.map(item => '<li>' + item + '</li>').join('') + '</ul>' : '<p>No action items found.</p>';
        document.getElementById('result').innerHTML = summaryHtml + actionsHtml;
      } catch (error) {
        document.getElementById('result').innerHTML = '<p style="color:red;">' + error.message + '</p>';
      }
    });
  </script>
</body>
</html>